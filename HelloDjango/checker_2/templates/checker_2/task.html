<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Task #{{task.pk}}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>
<style>
  /* img{
    max-width: 250px;
    max-height: 250px;
  } */
</style>
<body>
  <div class="container">
    <h1>Task #{{task.pk}}</h1>
<p>Domain: {{task.domain.url|urlize}}</p>
<p>Общий размер: {{task.files_size.images_size|filesizeformat}}</p>
<p>Размер thumb: {{task.files_size.thumb_size|filesizeformat}}</p>
<p>Разница: {{task.files_size.diff_size|filesizeformat}}</p>
<p>Экономия: {{task.files_size.diff_percent}}%</p>
<a href="{{task.archive.url}}">Скачать архив</a>
  </div>
  <div class="container-fluid">
<table class="table">
  <thead>
    <tr>
      <th scope="col">#</th>
      <th scope="col">Compress</th>
      <th scope="col">Orig</th>
      <th scope="col">Thumb</th>
      <th scope="col">Orig params</th>
      <th scope="col">Thumb params</th>
      <th scope="col">On page</th>
      <th scope="col">weight diff</th>
    </tr>
  </thead>
  <tbody>
  {%for crop_img in crop_images%}
    <tr>
      <th scope="row">{{crop_img.pk}}</th>
      <td>
        x{{crop_img.page_compression}}
      </td>
      <td>
          <img src="{{crop_img.orig_img.url}}" width="{{crop_img.page_width}}" height="{{crop_img.page_height}}">
      </td>
      <td>
          {%if crop_img.thumb%}
          <img src="{{crop_img.thumb.url}}" width="{{crop_img.page_width}}" height="{{crop_img.page_height}}">
          {%endif%}
      </td>
      <td>
        {{crop_img.orig_img.width}}x{{crop_img.orig_img.height}}<br>
        {{crop_img.orig_img.size|filesizeformat}}
      </td>
      <td>
        {{crop_img.thumb.width}}x{{crop_img.thumb.height}}<br>
        {{crop_img.thumb.size|filesizeformat}}
      </td>
      <td>
        {{crop_img.page_width}}x{{crop_img.page_height}}
      </td>
      <td>
        {{crop_img.weight_diff|filesizeformat}} ({{crop_img.weight_diff_percent}}%)
      </td>

    </tr>
  {%endfor%}
  </tbody>
</table>
  </div>
</body>
</html>